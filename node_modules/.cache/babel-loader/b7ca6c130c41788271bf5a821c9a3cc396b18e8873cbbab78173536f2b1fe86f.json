{"ast":null,"code":"// services/pdfService.js\nclass PDFService{constructor(){this.baseURL=process.env.REACT_APP_API_URL||'https://tuana-dokuman-backend.onrender.com';}// Backend bağlantısını test et\nasync testConnection(){try{const controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),5000);// 5 saniye timeout\nconst response=await fetch(`${this.baseURL}/api/health`,{method:'GET',mode:'cors',headers:{'Content-Type':'application/json'},signal:controller.signal});clearTimeout(timeoutId);if(response.ok){const data=await response.json().catch(()=>({}));console.log('Backend health check:',data);return true;}else{console.warn('Backend health check failed:',response.status);return false;}}catch(error){if(error.name==='AbortError'){console.warn('Backend health check timeout');}else{console.warn('Backend servisi erişilebilir değil:',error.message);}return false;}}// 1. PDF üretimini başlat\nasync startPDFGeneration(docType,formData){let language=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'en';try{const response=await fetch(`${this.baseURL}/api/pdf/start`,{method:'POST',mode:'cors',headers:{'Content-Type':'application/json'},body:JSON.stringify({docType,formData,language})});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.message||`HTTP error! status: ${response.status}`);}const result=await response.json();return result.jobId;}catch(error){console.error('Error starting PDF generation:',error);throw error;}}// 2. PDF durumunu kontrol et\nasync checkPDFStatus(jobId){try{const response=await fetch(`${this.baseURL}/api/pdf/status/${jobId}`);if(!response.ok){const errorData=await response.json();throw new Error(errorData.message||`HTTP error! status: ${response.status}`);}return await response.json();}catch(error){console.error('Error checking PDF status:',error);throw error;}}// 3. PDF'i indir\nasync downloadPDF(jobId){let fileName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'document.pdf';try{const response=await fetch(`${this.baseURL}/api/pdf/download/${jobId}`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const blob=await response.blob();// Blob'un boyutunu kontrol et\nif(blob.size===0){throw new Error('Received empty PDF file from server');}// Dosyayı indir\nconst url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.style.display='none';a.href=url;a.download=fileName;document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);return true;}catch(error){console.error('Error downloading PDF:',error);throw error;}}// Polling ile durum kontrolü (otomatik kontrol)\nasync waitForPDFCompletion(jobId){let onProgress=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:60000;const startTime=Date.now();const pollInterval=1000;// 1 saniye\nreturn new Promise((resolve,reject)=>{const poll=async()=>{try{if(Date.now()-startTime>timeout){reject(new Error('PDF generation timeout'));return;}const status=await this.checkPDFStatus(jobId);// Progress callback'i varsa çağır\nif(onProgress){onProgress(status);}if(status.status==='completed'){resolve(status);}else if(status.status==='failed'){reject(new Error(status.error||'PDF generation failed'));}else{// Hala pending/processing, tekrar kontrol et\nsetTimeout(poll,pollInterval);}}catch(error){reject(error);}};poll();});}// Form type'a göre dosya adı oluştur\ngenerateFileName(docType,formData){const timestamp=Date.now();switch(docType){case'proforma-invoice':const proformaNumber=formData['PROFORMA INVOICE NUMBER']||'Proforma';const proformaCompany=formData['RECIPIENT Şirket Adı']||'Company';const safeProformaName=`${proformaNumber}_${proformaCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safeProformaName}_Proforma-Invoice.pdf`;case'invoice':const invoiceNumber=formData['INVOICE NUMBER']||'Invoice';const invoiceCompany=formData['RECIPIENT Şirket Adı']||'Company';const safeInvoiceName=`${invoiceNumber}_${invoiceCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safeInvoiceName}_Invoice.pdf`;case'packing-list':const packingInvoiceNumber=formData['INVOICE NUMBER']||'No-Invoice-Number';const packingCompany=formData['RECIPIENT Şirket Adı']||'Company';const safePackingName=`${packingInvoiceNumber}_${packingCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safePackingName}_Packing-List.pdf`;case'credit-note':const creditNumber=formData['CREDIT NOTE NUMBER']||'Credit-Note';const safeCreditNumber=creditNumber.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safeCreditNumber}_Credit-Note.pdf`;case'debit-note':const debitNumber=formData['DEBIT NOTE NUMBER']||'Debit-Note';const safeDebitNumber=debitNumber.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safeDebitNumber}_Debit-Note.pdf`;case'order-confirmation':const orderConfirmationNumber=formData['ORDER CONFIRMATION NUMBER']||'Order-Confirmation';const safeOrderConfirmationNumber=orderConfirmationNumber.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safeOrderConfirmationNumber}_Order-Confirmation.pdf`;case'siparis':const orderNumber=formData['ORDER NUMBER']||'No-Order-Number';const safeOrderNumber=orderNumber.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safeOrderNumber}_Siparis-Formu.pdf`;case'price-offer':const priceOfferNumber=formData['PRICE OFFER NUMBER']||'No-Price-Offer-Number';const safePriceOfferNumber=priceOfferNumber.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safePriceOfferNumber}_Price-Offer.pdf`;case'fabric-technical':const articleCode=formData['ARTICLE CODE']||'Technical';const safeArticleCode=articleCode.replace(/[^a-zA-Z0-9-_\\s]/g,'').replace(/\\s+/g,'-');return`${safeArticleCode}_Technical-Specification.pdf`;default:return`${docType}_${timestamp}.pdf`;}}// Ana PDF üretim fonksiyonu - Production için\nasync generatePDFWithFallback(formData,docType){let language=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'en';try{console.log('Starting PDF generation with backend API');// Backend durumunu kontrol et\nconst isConnected=await this.testConnection();if(!isConnected){throw new Error('Backend servisi şu anda erişilebilir değil.');}const jobId=await this.startPDFGeneration(docType,formData,language);await this.waitForPDFCompletion(jobId);const fileName=this.generateFileName(docType,formData);return await this.downloadPDF(jobId,fileName);}catch(error){console.error('PDF generation failed:',error);// Backend bağlantı hatalarını kullanıcı dostu mesajlara çevir\nif(error.message.includes('template.generate is not a function')){throw new Error('PDF şablonu hatası tespit edildi. Backend geliştirici ekibi bilgilendirildi. Lütfen daha sonra tekrar deneyin.');}else if(error.message.includes('500')||error.message.includes('502')||error.message.includes('Load failed')){throw new Error('Backend servisi şu anda bakımda. Lütfen birkaç dakika sonra tekrar deneyin.');}else if(error.message.includes('404')){throw new Error('PDF oluşturma servisi bulunamadı. Lütfen sistem yöneticisi ile iletişime geçin.');}else if(error.message.includes('timeout')){throw new Error('PDF oluşturma işlemi zaman aşımına uğradı. Lütfen tekrar deneyin.');}else if(error.message.includes('Backend servisi şu anda erişilebilir değil')){throw new Error('Backend servisi şu anda bakımda. Lütfen daha sonra tekrar deneyin.');}else{throw new Error(`PDF oluşturulamadı: ${error.message}`);}}}}const pdfService=new PDFService();export default pdfService;","map":{"version":3,"names":["PDFService","constructor","baseURL","process","env","REACT_APP_API_URL","testConnection","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","mode","headers","signal","clearTimeout","ok","data","json","catch","console","log","warn","status","error","name","message","startPDFGeneration","docType","formData","language","arguments","length","undefined","body","JSON","stringify","errorData","Error","result","jobId","checkPDFStatus","downloadPDF","fileName","blob","size","url","window","URL","createObjectURL","a","document","createElement","style","display","href","download","appendChild","click","revokeObjectURL","removeChild","waitForPDFCompletion","onProgress","timeout","startTime","Date","now","pollInterval","Promise","resolve","reject","poll","generateFileName","timestamp","proformaNumber","proformaCompany","safeProformaName","replace","invoiceNumber","invoiceCompany","safeInvoiceName","packingInvoiceNumber","packingCompany","safePackingName","creditNumber","safeCreditNumber","debitNumber","safeDebitNumber","orderConfirmationNumber","safeOrderConfirmationNumber","orderNumber","safeOrderNumber","priceOfferNumber","safePriceOfferNumber","articleCode","safeArticleCode","generatePDFWithFallback","isConnected","includes","pdfService"],"sources":["/Users/mehmettfaik/Documents/GitHub/Tuana-Dokuman-Frontend/src/services/pdfService.js"],"sourcesContent":["// services/pdfService.js\nclass PDFService {\n  constructor() {\n    this.baseURL = process.env.REACT_APP_API_URL || 'https://tuana-dokuman-backend.onrender.com';\n  }\n\n  // Backend bağlantısını test et\n  async testConnection() {\n    try {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 saniye timeout\n      \n      const response = await fetch(`${this.baseURL}/api/health`, {\n        method: 'GET',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        signal: controller.signal\n      });\n      \n      clearTimeout(timeoutId);\n      \n      if (response.ok) {\n        const data = await response.json().catch(() => ({}));\n        console.log('Backend health check:', data);\n        return true;\n      } else {\n        console.warn('Backend health check failed:', response.status);\n        return false;\n      }\n    } catch (error) {\n      if (error.name === 'AbortError') {\n        console.warn('Backend health check timeout');\n      } else {\n        console.warn('Backend servisi erişilebilir değil:', error.message);\n      }\n      return false;\n    }\n  }\n\n  // 1. PDF üretimini başlat\n  async startPDFGeneration(docType, formData, language = 'en') {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/start`, {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          docType,\n          formData,\n          language\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      return result.jobId;\n    } catch (error) {\n      console.error('Error starting PDF generation:', error);\n      throw error;\n    }\n  }\n\n  // 2. PDF durumunu kontrol et\n  async checkPDFStatus(jobId) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/status/${jobId}`);\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error checking PDF status:', error);\n      throw error;\n    }\n  }\n\n  // 3. PDF'i indir\n  async downloadPDF(jobId, fileName = 'document.pdf') {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/download/${jobId}`);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const blob = await response.blob();\n      \n      // Blob'un boyutunu kontrol et\n      if (blob.size === 0) {\n        throw new Error('Received empty PDF file from server');\n      }\n      \n      // Dosyayı indir\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = fileName;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      \n      return true;\n    } catch (error) {\n      console.error('Error downloading PDF:', error);\n      throw error;\n    }\n  }\n\n  // Polling ile durum kontrolü (otomatik kontrol)\n  async waitForPDFCompletion(jobId, onProgress = null, timeout = 60000) {\n    const startTime = Date.now();\n    const pollInterval = 1000; // 1 saniye\n\n    return new Promise((resolve, reject) => {\n      const poll = async () => {\n        try {\n          if (Date.now() - startTime > timeout) {\n            reject(new Error('PDF generation timeout'));\n            return;\n          }\n\n          const status = await this.checkPDFStatus(jobId);\n          \n          // Progress callback'i varsa çağır\n          if (onProgress) {\n            onProgress(status);\n          }\n\n          if (status.status === 'completed') {\n            resolve(status);\n          } else if (status.status === 'failed') {\n            reject(new Error(status.error || 'PDF generation failed'));\n          } else {\n            // Hala pending/processing, tekrar kontrol et\n            setTimeout(poll, pollInterval);\n          }\n        } catch (error) {\n          reject(error);\n        }\n      };\n\n      poll();\n    });\n  }\n\n  // Form type'a göre dosya adı oluştur\n  generateFileName(docType, formData) {\n    const timestamp = Date.now();\n    \n    switch (docType) {\n      case 'proforma-invoice':\n        const proformaNumber = formData['PROFORMA INVOICE NUMBER'] || 'Proforma';\n        const proformaCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safeProformaName = `${proformaNumber}_${proformaCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeProformaName}_Proforma-Invoice.pdf`;\n        \n      case 'invoice':\n        const invoiceNumber = formData['INVOICE NUMBER'] || 'Invoice';\n        const invoiceCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safeInvoiceName = `${invoiceNumber}_${invoiceCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeInvoiceName}_Invoice.pdf`;\n        \n      case 'packing-list':\n        const packingInvoiceNumber = formData['INVOICE NUMBER'] || 'No-Invoice-Number';\n        const packingCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safePackingName = `${packingInvoiceNumber}_${packingCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safePackingName}_Packing-List.pdf`;\n        \n      case 'credit-note':\n        const creditNumber = formData['CREDIT NOTE NUMBER'] || 'Credit-Note';\n        const safeCreditNumber = creditNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeCreditNumber}_Credit-Note.pdf`;\n        \n      case 'debit-note':\n        const debitNumber = formData['DEBIT NOTE NUMBER'] || 'Debit-Note';\n        const safeDebitNumber = debitNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeDebitNumber}_Debit-Note.pdf`;\n        \n      case 'order-confirmation':\n        const orderConfirmationNumber = formData['ORDER CONFIRMATION NUMBER'] || 'Order-Confirmation';\n        const safeOrderConfirmationNumber = orderConfirmationNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeOrderConfirmationNumber}_Order-Confirmation.pdf`;\n        \n      case 'siparis':\n        const orderNumber = formData['ORDER NUMBER'] || 'No-Order-Number';\n        const safeOrderNumber = orderNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeOrderNumber}_Siparis-Formu.pdf`;\n        \n      case 'price-offer':\n        const priceOfferNumber = formData['PRICE OFFER NUMBER'] || 'No-Price-Offer-Number';\n        const safePriceOfferNumber = priceOfferNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safePriceOfferNumber}_Price-Offer.pdf`;\n        \n      case 'fabric-technical':\n        const articleCode = formData['ARTICLE CODE'] || 'Technical';\n        const safeArticleCode = articleCode.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeArticleCode}_Technical-Specification.pdf`;\n        \n      default:\n        return `${docType}_${timestamp}.pdf`;\n    }\n  }\n\n  // Ana PDF üretim fonksiyonu - Production için\n  async generatePDFWithFallback(formData, docType, language = 'en') {\n    try {\n      console.log('Starting PDF generation with backend API');\n      \n      // Backend durumunu kontrol et\n      const isConnected = await this.testConnection();\n      if (!isConnected) {\n        throw new Error('Backend servisi şu anda erişilebilir değil.');\n      }\n      \n      const jobId = await this.startPDFGeneration(docType, formData, language);\n      await this.waitForPDFCompletion(jobId);\n      const fileName = this.generateFileName(docType, formData);\n      return await this.downloadPDF(jobId, fileName);\n    } catch (error) {\n      console.error('PDF generation failed:', error);\n      \n      // Backend bağlantı hatalarını kullanıcı dostu mesajlara çevir\n      if (error.message.includes('template.generate is not a function')) {\n        throw new Error('PDF şablonu hatası tespit edildi. Backend geliştirici ekibi bilgilendirildi. Lütfen daha sonra tekrar deneyin.');\n      } else if (error.message.includes('500') || error.message.includes('502') || error.message.includes('Load failed')) {\n        throw new Error('Backend servisi şu anda bakımda. Lütfen birkaç dakika sonra tekrar deneyin.');\n      } else if (error.message.includes('404')) {\n        throw new Error('PDF oluşturma servisi bulunamadı. Lütfen sistem yöneticisi ile iletişime geçin.');\n      } else if (error.message.includes('timeout')) {\n        throw new Error('PDF oluşturma işlemi zaman aşımına uğradı. Lütfen tekrar deneyin.');\n      } else if (error.message.includes('Backend servisi şu anda erişilebilir değil')) {\n        throw new Error('Backend servisi şu anda bakımda. Lütfen daha sonra tekrar deneyin.');\n      } else {\n        throw new Error(`PDF oluşturulamadı: ${error.message}`);\n      }\n    }\n  }\n}\n\nconst pdfService = new PDFService();\nexport default pdfService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}