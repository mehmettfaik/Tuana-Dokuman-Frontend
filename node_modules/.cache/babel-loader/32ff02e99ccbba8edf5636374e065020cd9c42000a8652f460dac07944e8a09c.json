{"ast":null,"code":"// src/api.js\nimport axios from 'axios';\nconst api = axios.create({\n  baseURL: 'http://localhost:3001',\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  }\n});\nexport const generatePDF = async (docType, formData) => {\n  try {\n    const res = await api.post('/api/pdf/generate', {\n      docType,\n      formData\n    }, {\n      responseType: 'blob',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/pdf'\n      },\n      timeout: 10000 // 10 saniye timeout\n    });\n    if (!res.data) {\n      throw new Error('No data received from server');\n    }\n\n    // PDF blob'unu doğrula\n    console.log('Response content type:', res.headers['content-type']);\n    console.log('Response data type:', res.data.type);\n    console.log('Response data size:', res.data.size);\n    if (res.data.size === 0) {\n      throw new Error('Received empty file from server');\n    }\n    if (res.data.type && !res.data.type.includes('pdf') && !res.data.type.includes('octet-stream')) {\n      // Eğer response PDF değilse, muhtemelen hata mesajı JSON formatında gelmiştir\n      const text = await res.data.text();\n      try {\n        const errorData = JSON.parse(text);\n        throw new Error(errorData.message || 'Server returned non-PDF data');\n      } catch {\n        throw new Error('Server returned invalid PDF data');\n      }\n    }\n    return res.data;\n  } catch (error) {\n    console.error('PDF Generation Error:', error);\n    if (error.code === 'ECONNABORTED') {\n      throw new Error('Request timed out. Server is taking too long to respond.');\n    }\n    if (error.response) {\n      var _error$response$data;\n      // Server yanıt verdi ama hata döndü\n      const message = ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || `Server error: ${error.response.status}`;\n      throw new Error(message);\n    } else if (error.request) {\n      // İstek yapıldı ama yanıt alınamadı\n      if (error.message.includes('Network Error')) {\n        throw new Error('Server is not accessible. Please check if the server is running on port 3001.');\n      }\n      throw new Error('No response received from server. Please try again.');\n    } else {\n      // İstek oluşturulurken hata oluştu\n      throw new Error(`Request failed: ${error.message}`);\n    }\n  }\n};","map":{"version":3,"names":["axios","api","create","baseURL","headers","generatePDF","docType","formData","res","post","responseType","timeout","data","Error","console","log","type","size","includes","text","errorData","JSON","parse","message","error","code","response","_error$response$data","status","request"],"sources":["/Users/mehmettfaik/Desktop/Frontend/frontend/src/api.js"],"sourcesContent":["// src/api.js\nimport axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:3001',\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  }\n});\n\nexport const generatePDF = async (docType, formData) => {\n  try {\n    const res = await api.post(\n      '/api/pdf/generate',\n      { docType, formData },\n      { \n        responseType: 'blob',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/pdf'\n        },\n        timeout: 10000 // 10 saniye timeout\n      }\n    );\n    \n    if (!res.data) {\n      throw new Error('No data received from server');\n    }\n    \n    // PDF blob'unu doğrula\n    console.log('Response content type:', res.headers['content-type']);\n    console.log('Response data type:', res.data.type);\n    console.log('Response data size:', res.data.size);\n    \n    if (res.data.size === 0) {\n      throw new Error('Received empty file from server');\n    }\n    \n    if (res.data.type && !res.data.type.includes('pdf') && !res.data.type.includes('octet-stream')) {\n      // Eğer response PDF değilse, muhtemelen hata mesajı JSON formatında gelmiştir\n      const text = await res.data.text();\n      try {\n        const errorData = JSON.parse(text);\n        throw new Error(errorData.message || 'Server returned non-PDF data');\n      } catch {\n        throw new Error('Server returned invalid PDF data');\n      }\n    }\n    \n    return res.data;\n  } catch (error) {\n    console.error('PDF Generation Error:', error);\n    \n    if (error.code === 'ECONNABORTED') {\n      throw new Error('Request timed out. Server is taking too long to respond.');\n    }\n    \n    if (error.response) {\n      // Server yanıt verdi ama hata döndü\n      const message = error.response.data?.message || `Server error: ${error.response.status}`;\n      throw new Error(message);\n    } else if (error.request) {\n      // İstek yapıldı ama yanıt alınamadı\n      if (error.message.includes('Network Error')) {\n        throw new Error('Server is not accessible. Please check if the server is running on port 3001.');\n      }\n      throw new Error('No response received from server. Please try again.');\n    } else {\n      // İstek oluşturulurken hata oluştu\n      throw new Error(`Request failed: ${error.message}`);\n    }\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}