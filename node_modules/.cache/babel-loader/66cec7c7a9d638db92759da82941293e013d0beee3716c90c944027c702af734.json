{"ast":null,"code":"// src/components/DocumentForm.jsx\nimport React,{useState}from'react';import{generatePDF}from'../api';import FabricTechnicalForm from'./FabricTechnicalForm';import ProformaInvoiceForm from'./ProformaInvoiceForm';import InvoiceForm from'./InvoiceForm';import PackingListForm from'./PackingListForm';import CreditNoteForm from'./CreditNoteForm';import DebitNoteForm from'./DebitNoteForm';import OrderConfirmationForm from'./OrderConfirmationForm';import SiparisForm from'./SiparisForm';import PriceOfferForm from'./PriceOfferForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const fieldMap={fiyatTeklif:[{name:'Müşteri Adı',placeholder:'Müşteri Adı'},{name:'Ürün',placeholder:'Ürün Adı'},{name:'Tutar',placeholder:'Tutar'},{name:'Teslim Süresi',placeholder:'Teslim Süresi'}]};const DocumentForm=_ref=>{let{selectedDocType,selectedLanguage}=_ref;const[formData,setFormData]=useState({});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const fields=fieldMap[selectedDocType]||[];// Eğer teknik föy seçilmişse, özel form komponentini göster\nif(selectedDocType==='teknikFoy'){return/*#__PURE__*/_jsx(FabricTechnicalForm,{selectedLanguage:selectedLanguage});}// Eğer proforma invoice seçilmişse, özel form komponentini göster\nif(selectedDocType==='proformaInvoice'){return/*#__PURE__*/_jsx(ProformaInvoiceForm,{selectedLanguage:selectedLanguage});}// Eğer invoice seçilmişse, özel form komponentini göster\nif(selectedDocType==='invoice'){return/*#__PURE__*/_jsx(InvoiceForm,{selectedLanguage:selectedLanguage});}// Eğer packing list seçilmişse, özel form komponentini göster\nif(selectedDocType==='packingList'){return/*#__PURE__*/_jsx(PackingListForm,{selectedLanguage:selectedLanguage});}// Eğer credit note seçilmişse, özel form komponentini göster\nif(selectedDocType==='creditNote'){return/*#__PURE__*/_jsx(CreditNoteForm,{selectedLanguage:selectedLanguage});}// Eğer debit note seçilmişse, özel form komponentini göster\nif(selectedDocType==='debitNote'){return/*#__PURE__*/_jsx(DebitNoteForm,{selectedLanguage:selectedLanguage});}// Eğer order confirmation seçilmişse, özel form komponentini göster\nif(selectedDocType==='orderConfirmation'){return/*#__PURE__*/_jsx(OrderConfirmationForm,{selectedLanguage:selectedLanguage});}// Eğer sipariş formu seçilmişse, özel form komponentini göster\nif(selectedDocType==='siparis'){return/*#__PURE__*/_jsx(SiparisForm,{selectedLanguage:selectedLanguage});}// Eğer price offer seçilmişse, özel form komponentini göster\nif(selectedDocType==='priceOffer'){return/*#__PURE__*/_jsx(PriceOfferForm,{selectedLanguage:selectedLanguage});}const handleChange=(e,fieldName)=>{setFormData({...formData,[fieldName]:e.target.value});setError(null);// Yeni input girildiğinde hata mesajını temizle\n};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{const blob=await generatePDF(selectedDocType,formData);// PDF blob'unu doğru MIME type ile oluştur\nconst pdfBlob=new Blob([blob],{type:'application/pdf'});// Blob'un boyutunu kontrol et\nif(pdfBlob.size===0){throw new Error('Received empty PDF file');}// URL oluştur ve indir\nconst url=window.URL.createObjectURL(pdfBlob);const link=document.createElement('a');link.href=url;link.setAttribute('download',`${selectedDocType}_${Date.now()}.pdf`);link.style.display='none';document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);// URL'i temizle\n// Başarı mesajı\nconsole.log('PDF successfully downloaded');}catch(err){setError(err.message||\"PDF oluşturulurken bir hata oluştu.\");console.error(\"PDF generation error:\",err);}finally{setLoading(false);}};if(!selectedDocType)return null;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"document-form\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[selectedDocType.toUpperCase(),\" Bilgileri\"]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",style:{color:'red',marginBottom:'1rem'},children:error}),fields.map(field=>/*#__PURE__*/_jsx(\"div\",{className:\"form-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:field.placeholder,value:formData[field.name]||'',onChange:e=>handleChange(e,field.name),required:true,disabled:loading})},field.name)),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{position:'relative'},children:loading?'İşleniyor...':'PDF Oluştur'})]});};export default DocumentForm;","map":{"version":3,"names":["React","useState","generatePDF","FabricTechnicalForm","ProformaInvoiceForm","InvoiceForm","PackingListForm","CreditNoteForm","DebitNoteForm","OrderConfirmationForm","SiparisForm","PriceOfferForm","jsx","_jsx","jsxs","_jsxs","fieldMap","fiyatTeklif","name","placeholder","DocumentForm","_ref","selectedDocType","selectedLanguage","formData","setFormData","loading","setLoading","error","setError","fields","handleChange","e","fieldName","target","value","handleSubmit","preventDefault","blob","pdfBlob","Blob","type","size","Error","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","Date","now","style","display","body","appendChild","click","removeChild","revokeObjectURL","console","log","err","message","onSubmit","className","children","toUpperCase","color","marginBottom","map","field","onChange","required","disabled","position"],"sources":["/Users/mehmettfaik/Documents/GitHub/Tuana-Dokuman-Frontend/src/components/DocumentForm.jsx"],"sourcesContent":["// src/components/DocumentForm.jsx\nimport React, { useState } from 'react';\nimport { generatePDF } from '../api';\nimport FabricTechnicalForm from './FabricTechnicalForm';\nimport ProformaInvoiceForm from './ProformaInvoiceForm';\nimport InvoiceForm from './InvoiceForm';\nimport PackingListForm from './PackingListForm';\nimport CreditNoteForm from './CreditNoteForm';\nimport DebitNoteForm from './DebitNoteForm';\nimport OrderConfirmationForm from './OrderConfirmationForm';\nimport SiparisForm from './SiparisForm'; \nimport PriceOfferForm from './PriceOfferForm'; \n\nconst fieldMap = {\n  fiyatTeklif: [\n    { name: 'Müşteri Adı', placeholder: 'Müşteri Adı' },\n    { name: 'Ürün', placeholder: 'Ürün Adı' },\n    { name: 'Tutar', placeholder: 'Tutar' },\n    { name: 'Teslim Süresi', placeholder: 'Teslim Süresi' }\n  ]\n};\n\nconst DocumentForm = ({ selectedDocType, selectedLanguage }) => {\n  const [formData, setFormData] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const fields = fieldMap[selectedDocType] || [];\n\n  // Eğer teknik föy seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'teknikFoy') {\n    return <FabricTechnicalForm selectedLanguage={selectedLanguage} />;\n  }\n\n  // Eğer proforma invoice seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'proformaInvoice') {\n    return <ProformaInvoiceForm selectedLanguage={selectedLanguage} />;\n  }\n\n  // Eğer invoice seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'invoice') {\n    return <InvoiceForm selectedLanguage={selectedLanguage} />;\n  }\n\n  // Eğer packing list seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'packingList') {\n    return <PackingListForm selectedLanguage={selectedLanguage} />;\n  }\n\n  // Eğer credit note seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'creditNote') {\n    return <CreditNoteForm selectedLanguage={selectedLanguage} />;\n  }\n  // Eğer debit note seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'debitNote') {\n    return <DebitNoteForm selectedLanguage={selectedLanguage} />;\n  }\n\n  // Eğer order confirmation seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'orderConfirmation') {\n    return <OrderConfirmationForm selectedLanguage={selectedLanguage} />;\n  }\n\n  // Eğer sipariş formu seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'siparis') {\n    return <SiparisForm selectedLanguage={selectedLanguage} />;\n  }\n\n  // Eğer price offer seçilmişse, özel form komponentini göster\n  if (selectedDocType === 'priceOffer') {\n    return <PriceOfferForm selectedLanguage={selectedLanguage} />;\n  }\n\n  const handleChange = (e, fieldName) => {\n    setFormData({ ...formData, [fieldName]: e.target.value });\n    setError(null); // Yeni input girildiğinde hata mesajını temizle\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const blob = await generatePDF(selectedDocType, formData);\n      \n      // PDF blob'unu doğru MIME type ile oluştur\n      const pdfBlob = new Blob([blob], { type: 'application/pdf' });\n      \n      // Blob'un boyutunu kontrol et\n      if (pdfBlob.size === 0) {\n        throw new Error('Received empty PDF file');\n      }\n      \n      // URL oluştur ve indir\n      const url = window.URL.createObjectURL(pdfBlob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `${selectedDocType}_${Date.now()}.pdf`);\n      link.style.display = 'none';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url); // URL'i temizle\n      \n      // Başarı mesajı\n      console.log('PDF successfully downloaded');\n    } catch (err) {\n      setError(err.message || \"PDF oluşturulurken bir hata oluştu.\");\n      console.error(\"PDF generation error:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!selectedDocType) return null;\n\n  return (\n    <form onSubmit={handleSubmit} className=\"document-form\">\n      <h3>{selectedDocType.toUpperCase()} Bilgileri</h3>\n      {error && (\n        <div className=\"error-message\" style={{ color: 'red', marginBottom: '1rem' }}>\n          {error}\n        </div>\n      )}\n      {fields.map((field) => (\n        <div key={field.name} className=\"form-field\">\n          <input\n            type=\"text\"\n            placeholder={field.placeholder}\n            value={formData[field.name] || ''}\n            onChange={(e) => handleChange(e, field.name)}\n            required\n            disabled={loading}\n          />\n        </div>\n      ))}\n      <button type=\"submit\" disabled={loading} style={{ position: 'relative' }}>\n        {loading ? 'İşleniyor...' : 'PDF Oluştur'}\n      </button>\n    </form>\n  );\n};\n\nexport default DocumentForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}