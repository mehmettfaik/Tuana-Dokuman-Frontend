{"ast":null,"code":"// services/pdfService.js\nclass PDFService {\n  constructor() {\n    this.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n    this.legacyBaseURL = process.env.REACT_APP_LEGACY_API_URL || 'http://localhost:3000';\n  }\n\n  // Backend bağlantısını test et\n  async testConnection() {\n    try {\n      const response = await fetch(`${this.baseURL}/api/health`, {\n        method: 'GET',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      return response.ok;\n    } catch (error) {\n      console.warn('New API not available, will use legacy API');\n      return false;\n    }\n  }\n\n  // Legacy PDF generation (fallback)\n  async generatePDFLegacy(formData, docType, language = 'en') {\n    try {\n      const response = await fetch(`${this.legacyBaseURL}/api/generatePDF`, {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          docType,\n          formData,\n          language\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Legacy API error! status: ${response.status}`);\n      }\n      const blob = await response.blob();\n      if (blob.size === 0) {\n        throw new Error('Received empty PDF file from legacy server');\n      }\n\n      // Dosyayı indir\n      const fileName = `${docType}_${Date.now()}.pdf`;\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = fileName;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      return true;\n    } catch (error) {\n      console.error('Legacy PDF generation error:', error);\n      throw error;\n    }\n  }\n\n  // 1. PDF üretimini başlat\n  async startPDFGeneration(docType, formData, language = 'en') {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/start`, {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          docType,\n          formData,\n          language\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n      const result = await response.json();\n      return result.jobId;\n    } catch (error) {\n      console.error('Error starting PDF generation:', error);\n      throw error;\n    }\n  }\n\n  // 2. PDF durumunu kontrol et\n  async checkPDFStatus(jobId) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/status/${jobId}`);\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error checking PDF status:', error);\n      throw error;\n    }\n  }\n\n  // 3. PDF'i indir\n  async downloadPDF(jobId, fileName = 'document.pdf') {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/download/${jobId}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const blob = await response.blob();\n\n      // Blob'un boyutunu kontrol et\n      if (blob.size === 0) {\n        throw new Error('Received empty PDF file from server');\n      }\n\n      // Dosyayı indir\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = fileName;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      return true;\n    } catch (error) {\n      console.error('Error downloading PDF:', error);\n      throw error;\n    }\n  }\n\n  // Polling ile durum kontrolü (otomatik kontrol)\n  async waitForPDFCompletion(jobId, onProgress = null, timeout = 60000) {\n    const startTime = Date.now();\n    const pollInterval = 1000; // 1 saniye\n\n    return new Promise((resolve, reject) => {\n      const poll = async () => {\n        try {\n          if (Date.now() - startTime > timeout) {\n            reject(new Error('PDF generation timeout'));\n            return;\n          }\n          const status = await this.checkPDFStatus(jobId);\n\n          // Progress callback'i varsa çağır\n          if (onProgress) {\n            onProgress(status);\n          }\n          if (status.status === 'completed') {\n            resolve(status);\n          } else if (status.status === 'failed') {\n            reject(new Error(status.error || 'PDF generation failed'));\n          } else {\n            // Hala pending/processing, tekrar kontrol et\n            setTimeout(poll, pollInterval);\n          }\n        } catch (error) {\n          reject(error);\n        }\n      };\n      poll();\n    });\n  }\n\n  // Form type'a göre dosya adı oluştur\n  generateFileName(docType, formData) {\n    const timestamp = Date.now();\n    switch (docType) {\n      case 'proforma-invoice':\n        const proformaNumber = formData['PROFORMA INVOICE NUMBER'] || 'Proforma';\n        const proformaCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safeProformaName = `${proformaNumber}_${proformaCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeProformaName}_Proforma-Invoice.pdf`;\n      case 'invoice':\n        const invoiceNumber = formData['INVOICE NUMBER'] || 'Invoice';\n        const invoiceCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safeInvoiceName = `${invoiceNumber}_${invoiceCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeInvoiceName}_Invoice.pdf`;\n      case 'packing-list':\n        const packingInvoiceNumber = formData['INVOICE NUMBER'] || 'No-Invoice-Number';\n        const packingCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safePackingName = `${packingInvoiceNumber}_${packingCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safePackingName}_Packing-List.pdf`;\n      case 'credit-note':\n        const creditNumber = formData['CREDIT NOTE NUMBER'] || 'Credit-Note';\n        const safeCreditNumber = creditNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeCreditNumber}_Credit-Note.pdf`;\n      case 'debit-note':\n        const debitNumber = formData['DEBIT NOTE NUMBER'] || 'Debit-Note';\n        const safeDebitNumber = debitNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeDebitNumber}_Debit-Note.pdf`;\n      case 'order-confirmation':\n        const orderConfirmationNumber = formData['ORDER CONFIRMATION NUMBER'] || 'Order-Confirmation';\n        const safeOrderConfirmationNumber = orderConfirmationNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeOrderConfirmationNumber}_Order-Confirmation.pdf`;\n      case 'siparis':\n        const orderNumber = formData['ORDER NUMBER'] || 'No-Order-Number';\n        const safeOrderNumber = orderNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeOrderNumber}_Siparis-Formu.pdf`;\n      case 'price-offer':\n        const priceOfferNumber = formData['PRICE OFFER NUMBER'] || 'No-Price-Offer-Number';\n        const safePriceOfferNumber = priceOfferNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safePriceOfferNumber}_Price-Offer.pdf`;\n      case 'fabric-technical':\n        const articleCode = formData['ARTICLE CODE'] || 'Technical';\n        const safeArticleCode = articleCode.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeArticleCode}_Technical-Specification.pdf`;\n      default:\n        return `${docType}_${timestamp}.pdf`;\n    }\n  }\n\n  // Ana PDF üretim fonksiyonu - Fallback desteği ile\n  async generatePDFWithFallback(formData, docType, language = 'en') {\n    try {\n      // Önce yeni API'yi dene\n      const isConnected = await this.testConnection();\n      if (isConnected) {\n        console.log('Using new 3-stage PDF API');\n        const jobId = await this.startPDFGeneration(docType, formData, language);\n        await this.waitForPDFCompletion(jobId);\n        const fileName = this.generateFileName(docType, formData);\n        return await this.downloadPDF(jobId, fileName);\n      } else {\n        console.log('Falling back to legacy PDF API');\n        return await this.generatePDFLegacy(formData, docType, language);\n      }\n    } catch (error) {\n      console.error('Primary PDF generation failed, trying legacy API:', error);\n      try {\n        return await this.generatePDFLegacy(formData, docType, language);\n      } catch (legacyError) {\n        console.error('Both PDF generation methods failed:', legacyError);\n        throw new Error(`PDF oluşturulamadı. Backend servisi erişilebilir değil. Lütfen daha sonra tekrar deneyin. (Error: ${error.message})`);\n      }\n    }\n  }\n}\nconst pdfService = new PDFService();\nexport default pdfService;","map":{"version":3,"names":["PDFService","constructor","baseURL","process","env","REACT_APP_API_URL","legacyBaseURL","REACT_APP_LEGACY_API_URL","testConnection","response","fetch","method","mode","headers","ok","error","console","warn","generatePDFLegacy","formData","docType","language","body","JSON","stringify","Error","status","blob","size","fileName","Date","now","url","window","URL","createObjectURL","a","document","createElement","style","display","href","download","appendChild","click","revokeObjectURL","removeChild","startPDFGeneration","errorData","json","catch","message","result","jobId","checkPDFStatus","downloadPDF","waitForPDFCompletion","onProgress","timeout","startTime","pollInterval","Promise","resolve","reject","poll","setTimeout","generateFileName","timestamp","proformaNumber","proformaCompany","safeProformaName","replace","invoiceNumber","invoiceCompany","safeInvoiceName","packingInvoiceNumber","packingCompany","safePackingName","creditNumber","safeCreditNumber","debitNumber","safeDebitNumber","orderConfirmationNumber","safeOrderConfirmationNumber","orderNumber","safeOrderNumber","priceOfferNumber","safePriceOfferNumber","articleCode","safeArticleCode","generatePDFWithFallback","isConnected","log","legacyError","pdfService"],"sources":["/Users/mehmettfaik/Documents/GitHub/Tuana-Dokuman-Frontend/src/services/pdfService.js"],"sourcesContent":["// services/pdfService.js\nclass PDFService {\n  constructor() {\n    this.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n    this.legacyBaseURL = process.env.REACT_APP_LEGACY_API_URL || 'http://localhost:3000';\n  }\n\n  // Backend bağlantısını test et\n  async testConnection() {\n    try {\n      const response = await fetch(`${this.baseURL}/api/health`, {\n        method: 'GET',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n      return response.ok;\n    } catch (error) {\n      console.warn('New API not available, will use legacy API');\n      return false;\n    }\n  }\n\n  // Legacy PDF generation (fallback)\n  async generatePDFLegacy(formData, docType, language = 'en') {\n    try {\n      const response = await fetch(`${this.legacyBaseURL}/api/generatePDF`, {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          docType,\n          formData,\n          language\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Legacy API error! status: ${response.status}`);\n      }\n\n      const blob = await response.blob();\n      \n      if (blob.size === 0) {\n        throw new Error('Received empty PDF file from legacy server');\n      }\n      \n      // Dosyayı indir\n      const fileName = `${docType}_${Date.now()}.pdf`;\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = fileName;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      \n      return true;\n    } catch (error) {\n      console.error('Legacy PDF generation error:', error);\n      throw error;\n    }\n  }\n\n  // 1. PDF üretimini başlat\n  async startPDFGeneration(docType, formData, language = 'en') {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/start`, {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          docType,\n          formData,\n          language\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      return result.jobId;\n    } catch (error) {\n      console.error('Error starting PDF generation:', error);\n      throw error;\n    }\n  }\n\n  // 2. PDF durumunu kontrol et\n  async checkPDFStatus(jobId) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/status/${jobId}`);\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error checking PDF status:', error);\n      throw error;\n    }\n  }\n\n  // 3. PDF'i indir\n  async downloadPDF(jobId, fileName = 'document.pdf') {\n    try {\n      const response = await fetch(`${this.baseURL}/api/pdf/download/${jobId}`);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const blob = await response.blob();\n      \n      // Blob'un boyutunu kontrol et\n      if (blob.size === 0) {\n        throw new Error('Received empty PDF file from server');\n      }\n      \n      // Dosyayı indir\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = fileName;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      \n      return true;\n    } catch (error) {\n      console.error('Error downloading PDF:', error);\n      throw error;\n    }\n  }\n\n  // Polling ile durum kontrolü (otomatik kontrol)\n  async waitForPDFCompletion(jobId, onProgress = null, timeout = 60000) {\n    const startTime = Date.now();\n    const pollInterval = 1000; // 1 saniye\n\n    return new Promise((resolve, reject) => {\n      const poll = async () => {\n        try {\n          if (Date.now() - startTime > timeout) {\n            reject(new Error('PDF generation timeout'));\n            return;\n          }\n\n          const status = await this.checkPDFStatus(jobId);\n          \n          // Progress callback'i varsa çağır\n          if (onProgress) {\n            onProgress(status);\n          }\n\n          if (status.status === 'completed') {\n            resolve(status);\n          } else if (status.status === 'failed') {\n            reject(new Error(status.error || 'PDF generation failed'));\n          } else {\n            // Hala pending/processing, tekrar kontrol et\n            setTimeout(poll, pollInterval);\n          }\n        } catch (error) {\n          reject(error);\n        }\n      };\n\n      poll();\n    });\n  }\n\n  // Form type'a göre dosya adı oluştur\n  generateFileName(docType, formData) {\n    const timestamp = Date.now();\n    \n    switch (docType) {\n      case 'proforma-invoice':\n        const proformaNumber = formData['PROFORMA INVOICE NUMBER'] || 'Proforma';\n        const proformaCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safeProformaName = `${proformaNumber}_${proformaCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeProformaName}_Proforma-Invoice.pdf`;\n        \n      case 'invoice':\n        const invoiceNumber = formData['INVOICE NUMBER'] || 'Invoice';\n        const invoiceCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safeInvoiceName = `${invoiceNumber}_${invoiceCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeInvoiceName}_Invoice.pdf`;\n        \n      case 'packing-list':\n        const packingInvoiceNumber = formData['INVOICE NUMBER'] || 'No-Invoice-Number';\n        const packingCompany = formData['RECIPIENT Şirket Adı'] || 'Company';\n        const safePackingName = `${packingInvoiceNumber}_${packingCompany}`.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safePackingName}_Packing-List.pdf`;\n        \n      case 'credit-note':\n        const creditNumber = formData['CREDIT NOTE NUMBER'] || 'Credit-Note';\n        const safeCreditNumber = creditNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeCreditNumber}_Credit-Note.pdf`;\n        \n      case 'debit-note':\n        const debitNumber = formData['DEBIT NOTE NUMBER'] || 'Debit-Note';\n        const safeDebitNumber = debitNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeDebitNumber}_Debit-Note.pdf`;\n        \n      case 'order-confirmation':\n        const orderConfirmationNumber = formData['ORDER CONFIRMATION NUMBER'] || 'Order-Confirmation';\n        const safeOrderConfirmationNumber = orderConfirmationNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeOrderConfirmationNumber}_Order-Confirmation.pdf`;\n        \n      case 'siparis':\n        const orderNumber = formData['ORDER NUMBER'] || 'No-Order-Number';\n        const safeOrderNumber = orderNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeOrderNumber}_Siparis-Formu.pdf`;\n        \n      case 'price-offer':\n        const priceOfferNumber = formData['PRICE OFFER NUMBER'] || 'No-Price-Offer-Number';\n        const safePriceOfferNumber = priceOfferNumber.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safePriceOfferNumber}_Price-Offer.pdf`;\n        \n      case 'fabric-technical':\n        const articleCode = formData['ARTICLE CODE'] || 'Technical';\n        const safeArticleCode = articleCode.replace(/[^a-zA-Z0-9-_\\s]/g, '').replace(/\\s+/g, '-');\n        return `${safeArticleCode}_Technical-Specification.pdf`;\n        \n      default:\n        return `${docType}_${timestamp}.pdf`;\n    }\n  }\n\n  // Ana PDF üretim fonksiyonu - Fallback desteği ile\n  async generatePDFWithFallback(formData, docType, language = 'en') {\n    try {\n      // Önce yeni API'yi dene\n      const isConnected = await this.testConnection();\n      \n      if (isConnected) {\n        console.log('Using new 3-stage PDF API');\n        const jobId = await this.startPDFGeneration(docType, formData, language);\n        await this.waitForPDFCompletion(jobId);\n        const fileName = this.generateFileName(docType, formData);\n        return await this.downloadPDF(jobId, fileName);\n      } else {\n        console.log('Falling back to legacy PDF API');\n        return await this.generatePDFLegacy(formData, docType, language);\n      }\n    } catch (error) {\n      console.error('Primary PDF generation failed, trying legacy API:', error);\n      try {\n        return await this.generatePDFLegacy(formData, docType, language);\n      } catch (legacyError) {\n        console.error('Both PDF generation methods failed:', legacyError);\n        throw new Error(`PDF oluşturulamadı. Backend servisi erişilebilir değil. Lütfen daha sonra tekrar deneyin. (Error: ${error.message})`);\n      }\n    }\n  }\n}\n\nconst pdfService = new PDFService();\nexport default pdfService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}